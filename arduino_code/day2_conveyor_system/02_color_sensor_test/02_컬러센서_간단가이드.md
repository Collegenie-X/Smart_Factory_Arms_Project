# 02. ì»¬ëŸ¬ ì„¼ì„œ

## ğŸ“š ë¬´ì—‡ì„ ë°°ìš¸ê¹Œìš”?

```mermaid
mindmap
  root((ì»¬ëŸ¬<br/>ì„¼ì„œ))
    ì„¼ì„œë€?
      ìƒ‰ê¹”ê°ì§€
      RGBì›ë¦¬
    ì—°ê²°í•˜ê¸°
      I2Cí†µì‹ 
      4ê°œí•€
    ì½”ë”©í•˜ê¸°
      ìƒ‰ìƒì½ê¸°
      íŒë³„í•˜ê¸°
      ì†Œë¦¬ë‚´ê¸°
    ë¯¸ì…˜3ê°œ
      ì‹ í˜¸ë“±
      ìƒ‰ìƒê²Œì„
      ë¶„ë¥˜ê¸°
```

---

## 1. ì»¬ëŸ¬ ì„¼ì„œê°€ ë­ì˜ˆìš”?

### ê°„ë‹¨ ì„¤ëª…
- **ì»¬ëŸ¬ ì„¼ì„œ**: ë¬¼ì²´ì˜ ìƒ‰ê¹”ì„ ì•Œì•„ë‚´ëŠ” ì„¼ì„œ
- **ì›ë¦¬**: ë¹¨ê°•(R), ì´ˆë¡(G), íŒŒë‘(B) ë¹›ì˜ ì–‘ì„ ì¸¡ì •í•´ì„œ ìƒ‰ê¹” íŒë³„

```mermaid
graph LR
    A[ì„¼ì„œ] -->|ë¹› ì˜ê¸°| B[ë¬¼ì²´]
    B -->|ìƒ‰ê¹” ë°˜ì‚¬| A
    A -->|RGB ê°’| C[ì•„ë‘ì´ë…¸]
    C --> D[ë¹¨ê°•/ì´ˆë¡/íŒŒë‘<br/>íŒë³„!]
    
    style A fill:#FFE1E1,color:#111
    style B fill:#E1FFE1,color:#111
    style D fill:#90EE90,color:#111
```

---

## 2. ì¤€ë¹„ë¬¼

| ì´ë¦„ | ê°œìˆ˜ | ìš©ë„ |
|------|------|------|
| ì•„ë‘ì´ë…¸ ìš°ë…¸ | 1ê°œ | ë‘ë‡Œ |
| TCS34725 ì„¼ì„œ | 1ê°œ | ìƒ‰ê¹” ê°ì§€ |
| LED | 1ê°œ | ìƒíƒœ í‘œì‹œ |
| ë¶€ì € | 1ê°œ | ì†Œë¦¬ ë‚´ê¸° |
| ìƒ‰ì¢…ì´ | 3ì¥ | ë¹¨ê°•, ì´ˆë¡, íŒŒë‘ |
| ì í¼ì„  | 8ê°œ | ì—°ê²° |

---

## 3. ì—°ê²°í•˜ê¸° (4ê°œ í•€)

```mermaid
graph TB
    subgraph ì•„ë‘ì´ë…¸
        A4[A4 SDA]
        A5[A5 SCL]
        V33[3.3V]
        GND[GND]
        D13[13ë²ˆ]
        D4[4ë²ˆ]
    end
    
    subgraph ì„¼ì„œ
        SDA[SDA]
        SCL[SCL]
        VIN[VIN]
        GND2[GND]
    end
    
    A4 --> SDA
    A5 --> SCL
    V33 --> VIN
    GND --> GND2
    D13 --> LED[LED]
    D4 --> BUZ[ë¶€ì €]
    
    style ì•„ë‘ì´ë…¸ fill:#FFE1E1,color:#111
    style ì„¼ì„œ fill:#E1FFE1,color:#111
```

**ì¤‘ìš”!** ì„¼ì„œëŠ” **3.3V**ë¥¼ ì‚¬ìš©í•´ìš”! (5V ì•„ë‹˜)

**ì—°ê²° ìˆœì„œ:**
1. ì„¼ì„œ SDA â†’ ì•„ë‘ì´ë…¸ A4
2. ì„¼ì„œ SCL â†’ ì•„ë‘ì´ë…¸ A5
3. ì„¼ì„œ VIN â†’ ì•„ë‘ì´ë…¸ 3.3V (5V ê¸ˆì§€!)
4. ì„¼ì„œ GND â†’ ì•„ë‘ì´ë…¸ GND
5. LED â†’ 13ë²ˆ
6. ë¶€ì € â†’ 4ë²ˆ

---

## 4. ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜

**ë¨¼ì € ì„¤ì¹˜í•´ì•¼ í•´ìš”!**
1. ì•„ë‘ì´ë…¸ IDE ì—´ê¸°
2. ìŠ¤ì¼€ì¹˜ â†’ ë¼ì´ë¸ŒëŸ¬ë¦¬ í¬í•¨í•˜ê¸° â†’ ë¼ì´ë¸ŒëŸ¬ë¦¬ ê´€ë¦¬
3. "Adafruit TCS34725" ê²€ìƒ‰
4. ì„¤ì¹˜ ë²„íŠ¼ í´ë¦­

---

## 5. ê¸°ë³¸ ì½”ë“œ

```cpp
#include <Wire.h>
#include <Adafruit_TCS34725.h>

#define LED_PIN    13
#define BUZZER_PIN 4

// ì„¼ì„œ ê°ì²´ ë§Œë“¤ê¸°
Adafruit_TCS34725 colorSensor = Adafruit_TCS34725();

void setup() {
  Serial.begin(9600);
  pinMode(LED_PIN, OUTPUT);
  pinMode(BUZZER_PIN, OUTPUT);
  
  // ì„¼ì„œ ì‹œì‘
  if (!colorSensor.begin()) {
    Serial.println("Sensor not found!");
    while (1);  // ë©ˆì¶¤
  }
  
  digitalWrite(LED_PIN, HIGH);
  Serial.println("Color Sensor Ready!");
}

void loop() {
  uint16_t r, g, b, c;
  
  // ìƒ‰ìƒ ì½ê¸°
  colorSensor.getRawData(&r, &g, &b, &c);
  
  // 0-1000 ë²”ìœ„ë¡œ ë³€í™˜
  int red = map(r, 0, 20000, 0, 1000);
  int green = map(g, 0, 20000, 0, 1000);
  int blue = map(b, 0, 20000, 0, 1000);
  
  // ê²°ê³¼ ì¶œë ¥
  Serial.print("R:");
  Serial.print(red);
  Serial.print(" G:");
  Serial.print(green);
  Serial.print(" B:");
  Serial.println(blue);
  
  // ìƒ‰ìƒ íŒë³„
  if (red > green && red > blue) {
    Serial.println("RED!");
    tone(BUZZER_PIN, 523, 100);  // ë„
  } else if (green > red && green > blue) {
    Serial.println("GREEN!");
    tone(BUZZER_PIN, 659, 100);  // ë¯¸
  } else if (blue > red && blue > green) {
    Serial.println("BLUE!");
    tone(BUZZER_PIN, 784, 100);  // ì†”
  }
  
  delay(500);
}
```

---

## 6. ë™ì‘ ì›ë¦¬

```mermaid
graph TD
    A[ì‹œì‘] --> B[RGB ê°’ ì½ê¸°]
    B --> C[0-1000ìœ¼ë¡œ ë³€í™˜]
    C --> D{ì–´ë–¤ ìƒ‰?}
    D -->|Rì´ ìµœëŒ€| E[ë¹¨ê°•!]
    D -->|Gê°€ ìµœëŒ€| F[ì´ˆë¡!]
    D -->|Bê°€ ìµœëŒ€| G[íŒŒë‘!]
    E --> H[ë„ ìŒ]
    F --> I[ë¯¸ ìŒ]
    G --> J[ì†” ìŒ]
    H --> K[500ms ëŒ€ê¸°]
    I --> K
    J --> K
    K --> B
    
    style A fill:#90EE90,color:#111
    style D fill:#FFE1E1,color:#111
    style E fill:#FF6B6B,color:#111
    style F fill:#90EE90,color:#111
    style G fill:#87CEEB,color:#111
```

---

## 7. ë¯¸ì…˜ 3ê°œ

### ë¯¸ì…˜ 1: ì‹ í˜¸ë“± ë§Œë“¤ê¸°

**ëª©í‘œ**: ë¹¨ê°•/ì´ˆë¡/íŒŒë‘ ìƒ‰ì¢…ì´ë¡œ ì‹ í˜¸ë“± ì‘ë™

**í•µì‹¬ ê°œë…**:
- ìƒ‰ìƒ íŒë³„
- ê° ìƒ‰ìƒë§ˆë‹¤ ë‹¤ë¥¸ ë™ì‘

**ìˆœì„œë„:**
```mermaid
graph TD
    A[ìƒ‰ì¢…ì´ ëŒ€ê¸°] --> B[ìƒ‰ìƒ ì½ê¸°]
    B --> C{ë¬´ìŠ¨ ìƒ‰?}
    C -->|ë¹¨ê°•| D[ì •ì§€!<br/>ë‚®ì€ ìŒ]
    C -->|ì´ˆë¡| E[ì¶œë°œ!<br/>ë†’ì€ ìŒ]
    C -->|íŒŒë‘| F[ëŒ€ê¸°<br/>ì¤‘ê°„ ìŒ]
    D --> G[LED ê¹œë¹¡ì„]
    E --> G
    F --> G
    G --> B
    
    style C fill:#FFE1E1,color:#111
    style D fill:#FF6B6B,color:#111
    style E fill:#90EE90,color:#111
    style F fill:#87CEEB,color:#111
```

**ì •ë‹µ ì½”ë“œ:**
```cpp
#include <Wire.h>
#include <Adafruit_TCS34725.h>

#define LED_PIN    13
#define BUZZER_PIN 4

Adafruit_TCS34725 colorSensor = Adafruit_TCS34725();

void setup() {
  Serial.begin(9600);
  pinMode(LED_PIN, OUTPUT);
  pinMode(BUZZER_PIN, OUTPUT);
  
  if (!colorSensor.begin()) {
    Serial.println("Sensor error!");
    while (1);
  }
  
  Serial.println("=== Traffic Light ===");
  Serial.println("Show RED/GREEN/BLUE paper!");
}

void loop() {
  uint16_t r, g, b, c;
  colorSensor.getRawData(&r, &g, &b, &c);
  
  int red = map(r, 0, 20000, 0, 1000);
  int green = map(g, 0, 20000, 0, 1000);
  int blue = map(b, 0, 20000, 0, 1000);
  
  // ìƒ‰ìƒ íŒë³„
  if (red > green && red > blue && red > 100) {
    // ë¹¨ê°• = ì •ì§€
    Serial.println("RED - STOP!");
    tone(BUZZER_PIN, 262, 500);  // ë‚®ì€ ë„
    
    // LED ë¹ ë¥´ê²Œ ê¹œë¹¡ì„
    for (int i = 0; i < 5; i++) {
      digitalWrite(LED_PIN, HIGH);
      delay(100);
      digitalWrite(LED_PIN, LOW);
      delay(100);
    }
    
  } else if (green > red && green > blue && green > 100) {
    // ì´ˆë¡ = ì¶œë°œ
    Serial.println("GREEN - GO!");
    tone(BUZZER_PIN, 1047, 500);  // ë†’ì€ ë„
    
    // LED ê³„ì† ì¼œì§
    digitalWrite(LED_PIN, HIGH);
    delay(1000);
    
  } else if (blue > red && blue > green && blue > 100) {
    // íŒŒë‘ = ëŒ€ê¸°
    Serial.println("BLUE - WAIT!");
    tone(BUZZER_PIN, 523, 500);  // ì¤‘ê°„ ë„
    
    // LED ì²œì²œíˆ ê¹œë¹¡ì„
    for (int i = 0; i < 2; i++) {
      digitalWrite(LED_PIN, HIGH);
      delay(250);
      digitalWrite(LED_PIN, LOW);
      delay(250);
    }
  }
  
  digitalWrite(LED_PIN, LOW);
  delay(500);
}
```

**í•µì‹¬ í¬ì¸íŠ¸:**
- `red > green && red > blue`: ë¹¨ê°•ì´ ê°€ì¥ í´ ë•Œ
- `red > 100`: ë„ˆë¬´ ì–´ë‘ìš´ ìƒ‰ ì œì™¸
- ìƒ‰ìƒë§ˆë‹¤ ë‹¤ë¥¸ ì†Œë¦¬ì™€ LED íŒ¨í„´

---

### ë¯¸ì…˜ 2: ìƒ‰ìƒ ë§ì¶”ê¸° ê²Œì„

**ëª©í‘œ**: ì»´í“¨í„°ê°€ ë§í•˜ëŠ” ìƒ‰ê¹” ë¹¨ë¦¬ ì°¾ê¸°

**í•µì‹¬ ê°œë…**:
- ëœë¤ ìƒ‰ìƒ ì„ íƒ
- ì‹œê°„ ì¸¡ì •

**ìˆœì„œë„:**
```mermaid
graph TD
    A[ê²Œì„ ì‹œì‘] --> B[ëœë¤ ìƒ‰ìƒ ì„ íƒ]
    B --> C[ìƒ‰ìƒ ì•Œë ¤ì£¼ê¸°]
    C --> D[ì‹œì‘ ì‹œê°„ ê¸°ë¡]
    D --> E{ë§ëŠ” ìƒ‰?}
    E -->|NO| E
    E -->|YES| F[ê±¸ë¦° ì‹œê°„ ê³„ì‚°]
    F --> G{3ì´ˆ ì´ë‚´?}
    G -->|YES| H[ì„±ê³µ!]
    G -->|NO| I[ì•„ì‰¬ì›Œìš”]
    H --> B
    I --> B
    
    style B fill:#FFD700,color:#111
    style E fill:#FFE1E1,color:#111
    style G fill:#FFE1E1,color:#111
    style H fill:#90EE90,color:#111
```

**ì •ë‹µ ì½”ë“œ:**
```cpp
#include <Wire.h>
#include <Adafruit_TCS34725.h>

#define LED_PIN    13
#define BUZZER_PIN 4

Adafruit_TCS34725 colorSensor = Adafruit_TCS34725();

int targetColor = 0;  // 0=ë¹¨ê°•, 1=ì´ˆë¡, 2=íŒŒë‘
unsigned long startTime = 0;
bool gameOn = false;

void setup() {
  Serial.begin(9600);
  pinMode(LED_PIN, OUTPUT);
  pinMode(BUZZER_PIN, OUTPUT);
  
  if (!colorSensor.begin()) {
    Serial.println("Sensor error!");
    while (1);
  }
  
  Serial.println("=== Color Match Game ===");
  randomSeed(analogRead(A0));
  newRound();
}

void newRound() {
  targetColor = random(0, 3);  // 0, 1, 2 ì¤‘ ëœë¤
  gameOn = true;
  startTime = millis();
  
  Serial.println("\n--- New Round ---");
  Serial.print("Find: ");
  
  if (targetColor == 0) {
    Serial.println("RED");
  } else if (targetColor == 1) {
    Serial.println("GREEN");
  } else {
    Serial.println("BLUE");
  }
  
  tone(BUZZER_PIN, 1000, 200);
}

void loop() {
  if (!gameOn) return;
  
  uint16_t r, g, b, c;
  colorSensor.getRawData(&r, &g, &b, &c);
  
  int red = map(r, 0, 20000, 0, 1000);
  int green = map(g, 0, 20000, 0, 1000);
  int blue = map(b, 0, 20000, 0, 1000);
  
  int detected = -1;
  
  if (red > green && red > blue && red > 100) {
    detected = 0;  // ë¹¨ê°•
  } else if (green > red && green > blue && green > 100) {
    detected = 1;  // ì´ˆë¡
  } else if (blue > red && blue > green && blue > 100) {
    detected = 2;  // íŒŒë‘
  }
  
  // ì •ë‹µ í™•ì¸
  if (detected == targetColor) {
    gameOn = false;
    unsigned long elapsed = millis() - startTime;
    
    digitalWrite(LED_PIN, HIGH);
    
    Serial.print("Time: ");
    Serial.print(elapsed / 1000.0);
    Serial.println("s");
    
    if (elapsed < 3000) {
      Serial.println("EXCELLENT!");
      tone(BUZZER_PIN, 1500, 500);
    } else {
      Serial.println("GOOD!");
      tone(BUZZER_PIN, 800, 500);
    }
    
    delay(2000);
    digitalWrite(LED_PIN, LOW);
    newRound();
  }
  
  delay(100);
}
```

**í•µì‹¬ í¬ì¸íŠ¸:**
- `random(0, 3)`: 0, 1, 2 ì¤‘ ëœë¤ ì„ íƒ
- `millis() - startTime`: ê±¸ë¦° ì‹œê°„ ê³„ì‚°
- `detected == targetColor`: ì •ë‹µ í™•ì¸

---

### ë¯¸ì…˜ 3: ìƒ‰ìƒ ë¶„ë¥˜ê¸°

**ëª©í‘œ**: ìƒ‰ê¹”ë³„ë¡œ ê°œìˆ˜ ì„¸ê¸°

**í•µì‹¬ ê°œë…**:
- ë°°ì—´ë¡œ ê°œìˆ˜ ì €ì¥
- í†µê³„ ì¶œë ¥

**ìˆœì„œë„:**
```mermaid
graph TD
    A[ì¹´ìš´íŠ¸ ë°°ì—´<br/>R=0, G=0, B=0] --> B[ìƒ‰ìƒ ì½ê¸°]
    B --> C{ë¬´ìŠ¨ ìƒ‰?}
    C -->|ë¹¨ê°•| D[R++]
    C -->|ì´ˆë¡| E[G++]
    C -->|íŒŒë‘| F[B++]
    D --> G[í†µê³„ ì¶œë ¥]
    E --> G
    F --> G
    G --> H[3ì´ˆ ëŒ€ê¸°]
    H --> B
    
    style A fill:#E1F5FF,color:#111
    style C fill:#FFE1E1,color:#111
    style G fill:#FFD700,color:#111
```

**ì •ë‹µ ì½”ë“œ:**
```cpp
#include <Wire.h>
#include <Adafruit_TCS34725.h>

#define LED_PIN    13
#define BUZZER_PIN 4

Adafruit_TCS34725 colorSensor = Adafruit_TCS34725();

int colorCount[3] = {0, 0, 0};  // ë¹¨ê°•, ì´ˆë¡, íŒŒë‘ ê°œìˆ˜
int lastColor = -1;

void setup() {
  Serial.begin(9600);
  pinMode(LED_PIN, OUTPUT);
  pinMode(BUZZER_PIN, OUTPUT);
  
  if (!colorSensor.begin()) {
    Serial.println("Sensor error!");
    while (1);
  }
  
  Serial.println("=== Color Sorter ===");
  Serial.println("Show different colors!");
}

void loop() {
  uint16_t r, g, b, c;
  colorSensor.getRawData(&r, &g, &b, &c);
  
  int red = map(r, 0, 20000, 0, 1000);
  int green = map(g, 0, 20000, 0, 1000);
  int blue = map(b, 0, 20000, 0, 1000);
  
  int detected = -1;
  String colorName = "";
  
  if (red > green && red > blue && red > 100) {
    detected = 0;
    colorName = "RED";
  } else if (green > red && green > blue && green > 100) {
    detected = 1;
    colorName = "GREEN";
  } else if (blue > red && blue > green && blue > 100) {
    detected = 2;
    colorName = "BLUE";
  }
  
  // ìƒˆë¡œìš´ ìƒ‰ìƒì´ë©´ ì¹´ìš´íŠ¸
  if (detected != -1 && detected != lastColor) {
    colorCount[detected]++;
    
    digitalWrite(LED_PIN, HIGH);
    tone(BUZZER_PIN, 523 + (detected * 131), 200);
    
    Serial.println("\n--- Detected ---");
    Serial.print("Color: ");
    Serial.println(colorName);
    
    // í†µê³„ ì¶œë ¥
    Serial.println("\n=== Statistics ===");
    Serial.print("RED:   ");
    Serial.println(colorCount[0]);
    Serial.print("GREEN: ");
    Serial.println(colorCount[1]);
    Serial.print("BLUE:  ");
    Serial.println(colorCount[2]);
    Serial.print("TOTAL: ");
    Serial.println(colorCount[0] + colorCount[1] + colorCount[2]);
    
    delay(1000);
    digitalWrite(LED_PIN, LOW);
  }
  
  lastColor = detected;
  delay(200);
}
```

**í•µì‹¬ í¬ì¸íŠ¸:**
- `int colorCount[3]`: ë°°ì—´ë¡œ 3ê°€ì§€ ìƒ‰ ê°œìˆ˜ ì €ì¥
- `colorCount[detected]++`: í•´ë‹¹ ìƒ‰ ê°œìˆ˜ ì¦ê°€
- `detected != lastColor`: ìƒˆë¡œìš´ ìƒ‰ìƒì¸ì§€ í™•ì¸

---

## 8. ìì£¼ ë¬»ëŠ” ì§ˆë¬¸

### Q1. ì„¼ì„œê°€ ì´ˆê¸°í™” ì•ˆ ë¼ìš”
**ë‹µ**: 
- 3.3Vì— ì—°ê²°í–ˆëŠ”ì§€ í™•ì¸ (5V ì•„ë‹˜!)
- SDA, SCL í•€ í™•ì¸ (A4, A5)

### Q2. ìƒ‰ìƒì´ ì •í™•í•˜ì§€ ì•Šì•„ìš”
**ë‹µ**: 
- ì„¼ì„œì™€ ë¬¼ì²´ ê±°ë¦¬ 1-3cm ìœ ì§€
- ì¡°ëª…ì´ ì¼ì •í•œ ê³³ì—ì„œ í…ŒìŠ¤íŠ¸
- í°ìƒ‰ ì¢…ì´ë¡œ ë¨¼ì € í…ŒìŠ¤íŠ¸

### Q3. ê²€ì€ìƒ‰ì´ ì•ˆ ì¡í˜€ìš”
**ë‹µ**: ê²€ì€ìƒ‰ì€ ë¹›ì„ ê±°ì˜ ë°˜ì‚¬í•˜ì§€ ì•Šì•„ì„œ ì¸¡ì •ì´ ì–´ë ¤ì›Œìš”

### Q4. ë…¸ë€ìƒ‰ë„ ì¸ì‹í•˜ê³  ì‹¶ì–´ìš”
**ë‹µ**: 
```cpp
// ë…¸ë€ìƒ‰ = ë¹¨ê°• + ì´ˆë¡
if (red > 300 && green > 300 && blue < 200) {
  Serial.println("YELLOW!");
}
```

### Q5. ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜ê°€ ì•ˆ ë¼ìš”
**ë‹µ**: 
1. ìŠ¤ì¼€ì¹˜ â†’ ë¼ì´ë¸ŒëŸ¬ë¦¬ í¬í•¨í•˜ê¸° â†’ ë¼ì´ë¸ŒëŸ¬ë¦¬ ê´€ë¦¬
2. "Adafruit TCS34725" ê²€ìƒ‰
3. ì„¤ì¹˜ í´ë¦­

---

## 9. ë‹¤ìŒ ë‹¨ê³„

**ë‹¤ìŒ ë°°ìš¸ ê²ƒ**: [03_RGB_LED ê°€ì´ë“œ](./03_RGB_LED_ê°„ë‹¨ê°€ì´ë“œ.md)

---

**ë§Œë“  ë‚ **: 2026-01-27  
**ë‚œì´ë„**: â­â­â­â˜†â˜† (ì¤‘í•™ìƒìš©)

