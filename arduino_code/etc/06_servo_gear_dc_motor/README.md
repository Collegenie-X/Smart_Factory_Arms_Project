# 서보모터 + 기어모터 + DC모터 통합 예제

## 📌 개요
서보모터, 기어모터, DC모터를 통합 제어하는 예제입니다. 각 모터의 특성과 제어 방법을 학습할 수 있습니다.

## 🔧 하드웨어
- **서보모터** (SG90) - 정밀 각도 제어
- **기어모터** (12V) - 감속비 적용 회전
- **DC모터** (12V) - 일반 회전
- **L298N 모터 드라이버** - 모터 제어

## 📍 핀 연결
```
Arduino UNO
├─ D9  → 서보모터 PWM
│
├─ D2  → 기어모터 IN1 (방향)
├─ D3  → 기어모터 IN2 (방향)
├─ D5  → 기어모터 ENA (PWM 속도)
│
├─ D4  → DC모터 IN3 (방향)
├─ D7  → DC모터 IN4 (방향)
└─ D6  → DC모터 ENB (PWM 속도)

L298N 전원: 12V (모터용), 5V (로직용)
```

## 🎯 모터 종류 및 특성

### 1. 서보모터
- **특징**: 정밀한 각도 제어 (0~180도)
- **용도**: 로봇팔, 카메라 팬틸트, 분류 게이트
- **제어**: PWM 신호 (각도 명령)

### 2. 기어모터
- **특징**: 감속비로 토크 증가, 속도 감소
- **용도**: 컨베이어 벨트, 바퀴 구동
- **제어**: 방향 + PWM 속도

### 3. DC모터
- **특징**: 빠른 회전 속도, 낮은 토크
- **용도**: 팬, 프로펠러, 간단한 구동
- **제어**: 방향 + PWM 속도

## 💻 Serial 명령어

### 서보모터
| 명령어 | 기능 | 예시 |
|--------|------|------|
| `servo:각도` | 서보 각도 제어 (0~180) | `servo:90` |

### 기어모터
| 명령어 | 기능 | 예시 |
|--------|------|------|
| `gear:forward:속도` | 전진 (0~255) | `gear:forward:150` |
| `gear:backward:속도` | 후진 (0~255) | `gear:backward:100` |
| `gear:stop` | 정지 | - |

### DC모터
| 명령어 | 기능 | 예시 |
|--------|------|------|
| `dc:forward:속도` | 전진 (0~255) | `dc:forward:200` |
| `dc:backward:속도` | 후진 (0~255) | `dc:backward:150` |
| `dc:stop` | 정지 | - |

### 통합 제어
| 명령어 | 기능 |
|--------|------|
| `all:stop` | 모든 모터 정지 |
| `demo` | 데모 시연 |

## 📊 L298N 모터 드라이버 제어

### 방향 제어 (IN1, IN2, IN3, IN4)
| IN1 | IN2 | 동작 |
|-----|-----|------|
| HIGH | LOW | 전진 |
| LOW | HIGH | 후진 |
| LOW | LOW | 정지 |
| HIGH | HIGH | 브레이크 |

### 속도 제어 (ENA, ENB)
- **PWM 값**: 0~255
- **0**: 정지
- **128**: 중간 속도 (50%)
- **255**: 최대 속도 (100%)

## 📝 주요 함수

### 서보모터
- `controlServo()`: 각도 제어

### 기어모터
- `runGearMotorForward()`: 전진
- `runGearMotorBackward()`: 후진
- `stopGearMotor()`: 정지

### DC모터
- `runDCMotorForward()`: 전진
- `runDCMotorBackward()`: 후진
- `stopDCMotor()`: 정지

### 통합 제어
- `stopAllMotors()`: 모든 모터 정지
- `runDemo()`: 데모 시연

## 🔧 속도 프리셋
```cpp
#define MOTOR_SPEED_SLOW    100   // 느린 속도
#define MOTOR_SPEED_MEDIUM  150   // 보통 속도
#define MOTOR_SPEED_FAST    255   // 빠른 속도
```

## 🔍 응용 분야
- 로봇 제작 (서보: 팔, 기어모터: 바퀴)
- 컨베이어 시스템 (기어모터)
- 자동 분류 시스템 (서보: 게이트, DC: 팬)
- 드론 (DC모터: 프로펠러)

## ⚠️ 주의사항
1. **전원 분리**: 모터용 12V와 아두이노 5V 분리
2. **GND 공통**: 모든 GND는 연결 필수
3. **전류 제한**: L298N 최대 2A (모터 스펙 확인)
4. **서보 전원**: 서보는 5V 사용 (12V 연결 금지!)
