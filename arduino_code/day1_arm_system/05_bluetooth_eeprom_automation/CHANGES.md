# 05 â†’ 06 ë²„ì „ ë³€ê²½ ì‚¬í•­ (ì „ë ¥ ìµœì í™”)

## ğŸ¯ ì£¼ìš” ê°œì„  ëª©í‘œ

ì „ì•• ë¶€ì¡±ìœ¼ë¡œ ì¸í•œ ë¶ˆì•ˆì •ì„± í•´ê²°ì„ ìœ„í•œ **ì „ë ¥ ì†Œëª¨ ìµœì†Œí™”**

---

## âš¡ 1. Bluetooth ì¶œë ¥ ìµœì†Œí™”

### ê¸°ì¡´ (05 ë²„ì „)
```cpp
void saveCurrentPosition() {
  // ... ì €ì¥ ë¡œì§ ...
  
  Serial.print("[Save OK #");
  Serial.print(savedCount);
  Serial.println("]");
  
  // Bluetoothë¡œë„ ë™ì¼í•˜ê²Œ ì¶œë ¥ (ì „ë ¥ ì†Œëª¨!)
  BTSerial.print("[Save OK #");
  BTSerial.print(savedCount);
  BTSerial.println("]");
}
```

### ê°œì„  (06 ë²„ì „)
```cpp
void saveCurrentPosition() {
  // ... ì €ì¥ ë¡œì§ ...
  
  // Serialì€ ë””ë²„ê·¸ ëª¨ë“œì—ì„œë§Œ
#if ENABLE_DEBUG
  Serial.print("Save#");
  Serial.println(savedCount);
#endif
  
  // Bluetooth ì¶œë ¥ ì™„ì „ ì œê±°
}
```

**ì ˆê° íš¨ê³¼**: ~40% ì „ë ¥ ì ˆê° (SoftwareSerial ì†¡ì‹  ì œê±°)

---

## ğŸ“ 2. Serial ì¶œë ¥ ê°„ì†Œí™”

### ê¸°ì¡´ (05 ë²„ì „)
```cpp
void processCommand(bool fromBT) {
  Serial.print("[ì²˜ë¦¬] ");
  if (fromBT) {
    Serial.print("BT: ");
  }
  Serial.print("'");
  Serial.print(cmdBuffer);
  Serial.println("'");
  
  if (strcmp(cmdBuffer, "play") == 0) {
    Serial.println("[ëŒ€ê¸°] play ëª…ë ¹ ì¤€ë¹„");
    Serial.println("[ì‹¤í–‰] play ëª…ë ¹ ì‹œì‘");
    // ...
  }
}
```

### ê°œì„  (06 ë²„ì „)
```cpp
void processCommand() {
  // Serial ì¶œë ¥ ì™„ì „ ì œê±°
  
  if (strcmp(cmdBuffer, "play") == 0) {
    // ë¡œì§ë§Œ ì‹¤í–‰, ì¶œë ¥ ì—†ìŒ
    // ...
  }
}
```

**ì ˆê° íš¨ê³¼**: ~60% Serial ì¶œë ¥ ê°ì†Œ, ë©”ëª¨ë¦¬ ì ˆì•½

---

## â±ï¸ 3. delay ìµœì í™”

### ê¸°ì¡´ (05 ë²„ì „)
```cpp
void setup() {
  delay(100);   // Serial ì•ˆì •í™”
  delay(200);   // ì„œë³´ attach
  delay(20);    // ì„œë³´ ì´ë™
  delay(300);   // ì„œë³´ ëŒ€ê¸°
  delay(500);   // Bluetooth ì•ˆì •í™”
}

void saveCurrentPosition() {
  delay(50);    // ì„œë³´ detach
  delay(5);     // EEPROM ì“°ê¸°
  delay(20);    // ì„œë³´ ì¬ì—°ê²°
}
```

### ê°œì„  (06 ë²„ì „)
```cpp
void setup() {
  delay(50);    // Serial ì•ˆì •í™” (-50ms)
  delay(150);   // ì„œë³´ attach (-50ms)
  delay(15);    // ì„œë³´ ì´ë™ (-5ms)
  delay(200);   // ì„œë³´ ëŒ€ê¸° (-100ms)
  delay(300);   // Bluetooth ì•ˆì •í™” (-200ms)
}

void saveCurrentPosition() {
  delay(30);    // ì„œë³´ detach (-20ms)
  delay(4);     // EEPROM ì“°ê¸° (-1ms)
  delay(15);    // ì„œë³´ ì¬ì—°ê²° (-5ms)
}
```

**ì ˆê° íš¨ê³¼**: ì´ ~431ms ë‹¨ì¶•, ë¹ ë¥¸ ì‘ë‹µ ì‹œê°„

---

## ğŸ® 4. ì¡°ì´ìŠ¤í‹± ì¶œë ¥ ì œê±°

### ê¸°ì¡´ (05 ë²„ì „)
```cpp
void handleJoystick() {
  // ... ì¡°ì´ìŠ¤í‹± ì½ê¸° ...
  
  for (int i = 0; i < 4; i++) {
    if (angles[i] != prevAngles[i]) {
#if ENABLE_DEBUG
      Serial.print(i);
      Serial.print(":");
      Serial.println(angles[i]);
#endif
      prevAngles[i] = angles[i];
    }
  }
}
```

### ê°œì„  (06 ë²„ì „)
```cpp
void handleJoystick() {
  // ... ì¡°ì´ìŠ¤í‹± ì½ê¸° ...
  
  // ì¶œë ¥ ì™„ì „ ì œê±°
  // prevAngles ë°°ì—´ë„ ë¶ˆí•„ìš”
}
```

**ì ˆê° íš¨ê³¼**: ì¡°ì´ìŠ¤í‹± ì‚¬ìš© ì¤‘ Serial ì¶œë ¥ ì œê±°

---

## ğŸ“Š 5. ë©”ì‹œì§€ ê¸¸ì´ ìµœì†Œí™”

### ê¸°ì¡´ (05 ë²„ì „)
```
[ìˆ˜ì‹ ] play
[ì²˜ë¦¬] BT: 'play'
[ëŒ€ê¸°] play ëª…ë ¹ ì¤€ë¹„
[ì‹¤í–‰] play ëª…ë ¹ ì‹œì‘
[Play OK: 3 steps]
â†’#1: 90,80,90,15
â†’#2: 120,100,80,20
â†’#3: 60,70,100,15
[Play Done]
```

### ê°œì„  (06 ë²„ì „) - DEBUG ëª¨ë“œ
```
[play]
#1:90,80,90,15
#2:120,100,80,20
#3:60,70,100,15
```

### ê°œì„  (06 ë²„ì „) - ìš´ì˜ ëª¨ë“œ
```
(ì¶œë ¥ ì—†ìŒ)
```

**ì ˆê° íš¨ê³¼**: ë©”ì‹œì§€ ê¸¸ì´ ~80% ê°ì†Œ

---

## ğŸ”„ 6. í•¨ìˆ˜ ê°„ì†Œí™”

### handleCommand()
```cpp
// ê¸°ì¡´: fromBT ë§¤ê°œë³€ìˆ˜, Serial/BT ë¶„ê¸° ì²˜ë¦¬
void handleCommand() {
  bool fromBT = false;
  if (BTSerial.available()) {
    fromBT = true;
    // ë³µì¡í•œ ì²˜ë¦¬
  }
  processCommand(fromBT);
}

// ê°œì„ : BTë§Œ ì²˜ë¦¬, ê°„ë‹¨í•œ ë¡œì§
void handleCommand() {
  if (BTSerial.available()) {
    ch = BTSerial.read();
    // ê°„ë‹¨í•œ ì²˜ë¦¬
  }
  processCommand();
}
```

### processCommand()
```cpp
// ê¸°ì¡´: fromBT ë§¤ê°œë³€ìˆ˜, ì¶œì²˜ í™•ì¸
void processCommand(bool fromBT) {
  Serial.print("[ì²˜ë¦¬] ");
  if (fromBT) Serial.print("BT: ");
  // ...
}

// ê°œì„ : ë§¤ê°œë³€ìˆ˜ ì œê±°, ì¶œë ¥ ìµœì†Œí™”
void processCommand() {
  // ë¡œì§ë§Œ ì‹¤í–‰
}
```

---

## ğŸ“ˆ ì „ì²´ ë¹„êµí‘œ

| í•­ëª© | 05 ë²„ì „ | 06 ë²„ì „ | ê°œì„ ë„ |
|------|---------|---------|--------|
| **Bluetooth ì¶œë ¥** | ëª¨ë“  ëª…ë ¹ì— ì‘ë‹µ | ì œê±° | â­â­â­â­â­ |
| **Serial ì¶œë ¥** | í•­ìƒ ì¶œë ¥ | DEBUGë§Œ | â­â­â­â­â­ |
| **delay ì´í•©** | ~1000ms | ~569ms | â­â­â­â­ |
| **ë©”ì‹œì§€ ê¸¸ì´** | ê¸´ ì„¤ëª… | ì§§ì€ ì½”ë“œ | â­â­â­â­ |
| **ë©”ëª¨ë¦¬ ì‚¬ìš©** | ë†’ìŒ | ë‚®ìŒ | â­â­â­ |
| **ì „ë ¥ ì†Œëª¨** | ë†’ìŒ | ë‚®ìŒ | â­â­â­â­â­ |
| **ì•ˆì •ì„±** | ì¢‹ìŒ | ë§¤ìš° ì¢‹ìŒ | â­â­â­â­ |

---

## ğŸ¯ ê¶Œì¥ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤

### 05 ë²„ì „ ì‚¬ìš©
- ê°œë°œ/í…ŒìŠ¤íŠ¸ ë‹¨ê³„
- ë””ë²„ê¹…ì´ í•„ìš”í•  ë•Œ
- ì¶©ë¶„í•œ ì „ì› ê³µê¸‰ ê°€ëŠ¥
- ì•± ì¸ë²¤í„°ì—ì„œ í”¼ë“œë°± í•„ìš”

### 06 ë²„ì „ ì‚¬ìš©
- ì‹¤ì œ ìš´ì˜ í™˜ê²½
- ì „ì›ì´ ë¶€ì¡±í•œ ìƒí™©
- USB ì „ì›ë§Œ ì‚¬ìš©
- ì•ˆì •ì ì¸ ë™ì‘ì´ ì¤‘ìš”

---

## ğŸ”§ ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ

### 05 â†’ 06 ë²„ì „ ì „í™˜ ì‹œ

1. **ì½”ë“œ ì—…ë¡œë“œ**
   - 06 ë²„ì „ ì½”ë“œë¥¼ ì•„ë‘ì´ë…¸ì— ì—…ë¡œë“œ

2. **ENABLE_DEBUG ì„¤ì •**
   ```cpp
   #define ENABLE_DEBUG 1  // ì²˜ìŒì—ëŠ” ë””ë²„ê·¸ ëª¨ë“œë¡œ
   ```

3. **ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸**
   - save_ ëª…ë ¹ í…ŒìŠ¤íŠ¸
   - play_ ëª…ë ¹ í…ŒìŠ¤íŠ¸
   - auto_ ëª…ë ¹ í…ŒìŠ¤íŠ¸

4. **ìš´ì˜ ëª¨ë“œ ì „í™˜**
   ```cpp
   #define ENABLE_DEBUG 0  // ì•ˆì •ì ì´ë©´ ìš´ì˜ ëª¨ë“œë¡œ
   ```

5. **ì•± ì¸ë²¤í„° ìˆ˜ì • (ì„ íƒ)**
   - í”¼ë“œë°± ë©”ì‹œì§€ê°€ ì—†ìœ¼ë¯€ë¡œ ì•±ì—ì„œ ìì²´ í‘œì‹œ
   - ì˜ˆ: "ì €ì¥ ì™„ë£Œ!", "ì¬ìƒ ì‹œì‘!" ë“±

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

### 06 ë²„ì „ì˜ ì œì•½

1. **í”¼ë“œë°± ì—†ìŒ**
   - Bluetoothë¡œ ì‘ë‹µ ë©”ì‹œì§€ê°€ ì—†ìŒ
   - ì•± ì¸ë²¤í„°ì—ì„œ ìì²´ UIë¡œ í™•ì¸ í•„ìš”

2. **ë””ë²„ê·¸ ì–´ë ¤ì›€**
   - ìš´ì˜ ëª¨ë“œì—ì„œëŠ” Serial ì¶œë ¥ ìµœì†Œ
   - ë¬¸ì œ ë°œìƒ ì‹œ ENABLE_DEBUGë¥¼ 1ë¡œ ì„¤ì •

3. **list ëª…ë ¹**
   - DEBUG ëª¨ë“œì—ì„œë§Œ ì¶œë ¥
   - ìš´ì˜ ëª¨ë“œì—ì„œëŠ” ì‘ë™í•˜ì§€ ì•ŠìŒ

### í•´ê²° ë°©ë²•

```cpp
// í•„ìš” ì‹œ ì„ì‹œë¡œ ë””ë²„ê·¸ ëª¨ë“œ í™œì„±í™”
#define ENABLE_DEBUG 1

// ë¬¸ì œ í•´ê²° í›„ ë‹¤ì‹œ ë¹„í™œì„±í™”
#define ENABLE_DEBUG 0
```

---

## ğŸš€ ê²°ë¡ 

**06 ë²„ì „ì€ ì „ë ¥ ìµœì í™”ì— ì´ˆì **ì„ ë§ì¶˜ ë²„ì „ìœ¼ë¡œ, ì „ì›ì´ ë¶€ì¡±í•œ í™˜ê²½ì—ì„œ ì•ˆì •ì ìœ¼ë¡œ ë™ì‘í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.

âœ… **ì¥ì **:
- ì „ë ¥ ì†Œëª¨ ìµœì†Œí™”
- ì•ˆì •ì ì¸ ë™ì‘
- ë¹ ë¥¸ ì‘ë‹µ ì†ë„
- ë©”ëª¨ë¦¬ ì ˆì•½

âš ï¸ **ë‹¨ì **:
- Bluetooth í”¼ë“œë°± ì—†ìŒ
- ë””ë²„ê·¸ ì •ë³´ ì œí•œì 

**ê¶Œì¥**: ì‹¤ì œ ì‚¬ìš© í™˜ê²½ì—ì„œëŠ” 06 ë²„ì „ì„, ê°œë°œ/í…ŒìŠ¤íŠ¸ì—ì„œëŠ” 05 ë²„ì „ì„ ì‚¬ìš©í•˜ì„¸ìš”.
